{"ast":null,"code":"import React,{useState,useEffect}from'react';import{GoogleOAuthProvider}from'@react-oauth/google';import'./App.css';import AuthService from'./services/auth';import LoginComponent from'./components/Login';import Dashboard from'./components/Dashboard';import{GOOGLE_CONFIG}from'./config/google';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{// Check for existing authentication on app load\nconst currentUser=AuthService.getCurrentUser();if(currentUser){setUser(currentUser);}setLoading(false);// Handle OAuth callback\nconst urlParams=new URLSearchParams(window.location.search);const code=urlParams.get('code');const state=urlParams.get('state');if(code&&state){handleOAuthCallback(code,state);}},[]);const handleOAuthCallback=async(code,state)=>{try{setLoading(true);const user=await AuthService.handleCallback(code,state);setUser(user);// Clean up URL\nwindow.history.replaceState({},document.title,window.location.pathname);}catch(error){console.error('OAuth callback failed:',error);// Handle error (show message to user)\n}finally{setLoading(false);}};const handleLogin=user=>{setUser(user);};const handleLogout=()=>{AuthService.logout();setUser(null);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading CareConnect...\"})})});}return/*#__PURE__*/_jsx(GoogleOAuthProvider,{clientId:GOOGLE_CONFIG.CLIENT_ID,children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"CareConnect\"}),/*#__PURE__*/_jsx(\"p\",{children:\"AI-Powered Travel Health Assistant\"})]}),/*#__PURE__*/_jsx(\"main\",{className:\"container\",children:user?/*#__PURE__*/_jsx(Dashboard,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(LoginComponent,{onLogin:handleLogin})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","GoogleOAuthProvider","AuthService","LoginComponent","Dashboard","GOOGLE_CONFIG","jsx","_jsx","jsxs","_jsxs","App","user","setUser","loading","setLoading","currentUser","getCurrentUser","urlParams","URLSearchParams","window","location","search","code","get","state","handleOAuthCallback","handleCallback","history","replaceState","document","title","pathname","error","console","handleLogin","handleLogout","logout","className","children","clientId","CLIENT_ID","onLogout","onLogin"],"sources":["/Users/hz317604/Library/CloudStorage/OneDrive-TheHertzCorporation/Documents/Repos/CareConnect/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { GoogleOAuthProvider } from '@react-oauth/google';\nimport './App.css';\nimport AuthService, { User } from './services/auth';\nimport LoginComponent from './components/Login';\nimport Dashboard from './components/Dashboard';\nimport { GOOGLE_CONFIG } from './config/google';\n\nfunction App() {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Check for existing authentication on app load\n    const currentUser = AuthService.getCurrentUser();\n    if (currentUser) {\n      setUser(currentUser);\n    }\n    setLoading(false);\n\n    // Handle OAuth callback\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get('code');\n    const state = urlParams.get('state');\n\n    if (code && state) {\n      handleOAuthCallback(code, state);\n    }\n  }, []);\n\n  const handleOAuthCallback = async (code: string, state: string) => {\n    try {\n      setLoading(true);\n      const user = await AuthService.handleCallback(code, state);\n      setUser(user);\n      \n      // Clean up URL\n      window.history.replaceState({}, document.title, window.location.pathname);\n    } catch (error) {\n      console.error('OAuth callback failed:', error);\n      // Handle error (show message to user)\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLogin = (user: User) => {\n    setUser(user);\n  };\n\n  const handleLogout = () => {\n    AuthService.logout();\n    setUser(null);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"App\">\n        <div className=\"loading\">\n          <h2>Loading CareConnect...</h2>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <GoogleOAuthProvider clientId={GOOGLE_CONFIG.CLIENT_ID}>\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <h1>CareConnect</h1>\n          <p>AI-Powered Travel Health Assistant</p>\n        </header>\n\n        <main className=\"container\">\n          {user ? (\n            <Dashboard user={user} onLogout={handleLogout} />\n          ) : (\n            <LoginComponent onLogin={handleLogin} />\n          )}\n        </main>\n      </div>\n    </GoogleOAuthProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}